server {
    listen 80;
    
    # Listen abc.taly.space and *store.yegobox.com domains
    # Get $subdomain variable from domain name
    server_name ~^(?<subdomain>.+)\.store\.yegobox store.yegobox.com;

    # Include ssl configs and cert's params
    include snippets/certs/abc_taly;

    # Return data as a plain text
    add_header Content-Type text/plain;

    if ($subdomain = "") {
        return 200 "Welcome to store.yegobox.com";
    }

    return 200 "Welcome to $subdomain.yegobox.com";
}